<!DOCTYPE html>
<html>
<head>
	<title>Employees</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style/registerForm.css">
    <script type="text/javascript" src="scripts/script.js"></script>
    <script type="text/javascript" src="scripts/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        var employe; 
        
        $(document).ready(function(){
            
            let index = getParameterFromActualUrl("index");
            if(index === ""){
                //It will register a new employe:
                employe = getNewEmployeObject();
            } else{
                //It will edit a employe:
                employe = getEmploye(index);
                
                $("#saveButton").attr('onclick', 'update('+index+')');
                $("#name").val(employe.name);
                $("#age").val(employe.age);
                $("#birthDay").val(employe.birthDay);
                $("#phoneNumber").val(employe.phoneNumber);
                $("#rg").val(employe.rg);
                $("#cpf").val(employe.cpf);
                $("#address").val(employe.address);
                $("#addressNumber").val(employe.number);
                $("#city").val(employe.city);
                $("#state").val(employe.state);
                $("#notes").val(employe.notes);
                
            }
            
        });
        
        function save(){
            saveNewEmploye(employe);
            window.location.replace("index.html");
        }
        
        function cancel(){
            window.location.replace("index.html");
        }
        
        function update(index){
            updateEmploye(index, employe);
            window.location.replace("index.html");
        }
        
    </script>
</head>
<body>
	<header>
		<h1 id="title">Employees register</h1>
	</header>
	<div>
		<form>
			<fieldset>
				<h2>Create/Edit</h2>
				<hr>
				<div class = "form-margin">
				<input type="text" id="name" name="name" placeholder="Name" style="width: 98.4%" onchange="setName(employe, this.value)">
				<br>

                <input type="number" id="age" name="age" placeholder="Age" style="width: 31.6%" onchange="setAge(employe, this.value)">
				<input type="text" id="birthDay" name="birthDay" placeholder="Birth Day" 
                       style="width: 31.6%" onchange="setBirthDay(employe, this.value)">
				<input type="text" id="phoneNumber" name="phoneNumber"  placeholder="Phone Number" class="whithout-margin-right"
                       onchange="setPhoneNumber(employe, this.value)">

				<br>
                <input type="text" id="rg" name="rg" placeholder="RG" style="width: 31.6%" onchange="setRg(employe, this.value)">
                <input type="text" id="cpf" name="CPF" placeholder="CPF" style="width: 31.6%" onchange="setCpf(employe, this.value)">
				<br>
                <input type="text" id="address" name="address" placeholder="Address" style="width: 91.5%" 
                        onchange="setAddress(employe, this.value)">
                <input type="text" id="addressNumber" name="AddressNumber"  placeholder="Number" 
                        onchange="setAddressNumber(employe, this.value)">
				<br>
                <input type="text" id="city" name="city" placeholder="City" style="width: 44.9%" 
                        onchange="setCity(employe, this.value)">
                <input type="text" id="state" name="state" placeholder="State" style="width: 44.9%" 
                        onchange="setState(employe, this.value)">
				<br>
				<textarea name="notes" id="notes" placeholder="Notes" 
                          style="width: 98.4%; min-height: 80px;" onchange="setNotes(employe, this.value)"></textarea>
				<br> <br>
				<button class="form-buttons" type="button" id="saveButton" onclick="save()">Save</button>
                <button class="form-buttons" type="reset" id="cancelButton" onclick="cancel()">Cancel</button>
				</div>
			</fieldset>
		</form>
	</div>
</body>
</html>